<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produck - Authentication</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Tailwind Configuration
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        yellow: {
                            300: '#fde047',
                            400: '#facc15',
                            500: '#fbbf24',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        };
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">

    <script src="https://cdn.auth0.com/auth0-spa-js/2.0/auth0-spa-js.production.js"></script>

    <style>
        /* 4. Custom CSS from your Design Specification */

        /* --- Base & Typography --- */
        body {
            /* 1. LIGHTER BACKGROUND */
            background-color: #121212; 
            /* LIGHTER Gradient Background */
            background-image: linear-gradient(180deg, #181818 0%, #121212 100%);
            /* Body Text: */
            color: #e5e5e5;
            /* Primary Font: */
            font-family: 'Inter', sans-serif;
            overflow: hidden; /* Hide scrollbars as effects are fixed */
        }
        
        /* --- Texture & Overlay Effects (z-index: 1) --- */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 1;
            /* SVG feTurbulence for grain */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
            opacity: 0.15;
            mix-blend-mode: overlay;
        }

        /* --- Grid Pattern Overlay (z-index: 0) --- */
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
            opacity: 0.03;
            /* Simplified grid */
            background-image: 
                linear-gradient(rgba(250, 204, 21, 0.24) 1px, transparent 1px),
                linear-gradient(90deg, rgba(250, 204, 21, 0.24) 1px, transparent 1px);
            background-size: 100px 100px, 100px 100px;
            background-position: 0 0, 0 0;
        }

        /* --- Scanline Effects (z-index: 60) --- */
        .scanlines {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 60;
            background-image: repeating-linear-gradient(
                0deg, 
                transparent, 
                transparent 2px, 
                rgba(255, 255, 255, 0.03) 2px, 
                rgba(255, 255, 255, 0.03) 4px
            );
            opacity: 0.1;
        }

        /* --- Animated Particle Background (z-index: -1) --- */
        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        /* --- Glassmorphism Effects --- */
        .glass-card {
            /* Lighter glass */
            background: linear-gradient(135deg, rgba(20, 20, 20, 0.7) 0%, rgba(15, 15, 15, 0.6) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        /* --- Glow Effects & Text Shadows --- */
        .text-glow-yellow {
            text-shadow: 
                0 0 20px rgba(250, 204, 21, 0.18),
                0 0 40px rgba(250, 204, 21, 0.09);
        }

        .drop-shadow-yellow-lg {
            filter: drop-shadow(0 0 30px rgba(250, 204, 21, 0.36));
        }

        .drop-shadow-yellow-md {
            filter: drop-shadow(0 0 20px rgba(250, 204, 21, 0.48));
        }
        
        .drop-shadow-yellow-sm {
            filter: drop-shadow(0 0 10px rgba(250, 204, 21, 0.3));
        }

        .box-glow-yellow {
            box-shadow: 
                0 0 15px rgba(250, 204, 21, 0.18),
                0 0 30px rgba(250, 204, 21, 0.09);
        }

        /* --- Hover Effects --- */
        .hover-glow-effect {
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .hover-glow-effect::before {
            content: '';
            position: absolute;
            inset: -1px;
            border-radius: inherit; /* Use parent's border-radius */
            padding: 1px;
            background: linear-gradient(135deg, #fde047, #facc15, #fbbf24);
            /* Standard mask property first, then vendor prefix */
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .hover-glow-effect:hover::before {
            opacity: 0.48;
        }
        .hover-glow-effect:hover {
            transform: translateY(-4px);
            box-shadow: 
                0 0 30px rgba(250, 204, 21, 0.18),
                0 20px 40px rgba(0, 0, 0, 0.4);
        }
        
        /* --- Gradient Background Orbs (z-index: 0) --- */
        .fixed-decor {
            position: fixed;
            inset: 0;
            z-index: 0;
            overflow: hidden;
        }
        .orb-1 {
            position: absolute;
            top: -120px;
            left: -120px;
            width: 480px;
            height: 480px;
            border-radius: 100%;
            opacity: 0.06;
            filter: blur(72px);
            background: radial-gradient(circle, rgba(250, 204, 21, 0.24) 0%, transparent 70%);
            animation: float 25s ease-in-out infinite;
        }
        .orb-2 {
            position: absolute;
            bottom: -180px;
            right: -180px;
            width: 420px;
            height: 420px;
            border-radius: 100%;
            opacity: 0.06;
            filter: blur(72px);
            background: radial-gradient(circle, rgba(250, 204, 21, 0.24) 0%, transparent 70%);
            animation: float-slow 30s ease-in-out infinite;
        }

        /* --- Animations & Keyframes --- */
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(20px, -20px) rotate(2deg); }
            50% { transform: translate(-10px, -30px) rotate(-2deg); }
            75% { transform: translate(-20px, -10px) rotate(1deg); }
        }
        @keyframes float-slow {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-30px, 20px) rotate(-3deg); }
            50% { transform: translate(15px, 40px) rotate(3deg); }
            75% { transform: translate(25px, 15px) rotate(-2deg); }
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        /* End of Custom CSS */
    </style>
</head>
<body class="antialiased">

    <canvas id="particle-canvas"></canvas>
    
    <div class="fixed-decor">
        <div class="orb-1"></div>
        <div class="orb-2"></div>
        </div>
    
    <div class="scanlines"></div>

    <main class="relative z-10 flex items-center justify-center min-h-screen p-4">
        
        <div class="glass-card w-full max-w-md rounded-2xl p-8 text-center animate-fade-in" style="animation-delay: 0.2s;">
            
            <h1 class="text-3xl md:text-5xl font-black text-white text-glow-yellow drop-shadow-yellow-lg animate-fade-in" style="animation-delay: 0.4s;">
                Welcome
            </h1>
            
            <p class="mt-4 text-base md:text-lg text-neutral-300 animate-fade-in" style="animation-delay: 0.6s;">
                Log in or sign up to continue
            </p>
            
            <button id="login-button" 
                    class="mt-8 w-full px-6 py-3 bg-yellow-400 text-black text-base font-bold rounded-lg shadow-lg shadow-yellow-400/30
                           transition-all duration-300 ease-out
                           hover:bg-yellow-300 hover:shadow-yellow-300/40 hover:scale-105
                           focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-opacity-75
                           animate-fade-in"
                    style="animation-delay: 0.8s;">
                Continue with Auth0
            </button>
            
            <button id="stakeholder-login-button" 
                    class="mt-4 w-full px-6 py-3 bg-transparent text-neutral-300 text-base font-bold rounded-lg 
                           border border-neutral-600
                           transition-all duration-300 ease-out
                           hover:bg-neutral-800 hover:border-neutral-500 hover:text-white
                           focus:outline-none focus:ring-2 focus:ring-neutral-500 focus:ring-opacity-75
                           animate-fade-in"
                    style="animation-delay: 1.0s;">
                    
                Stakeholder Login
            </button>
            
        </div>
    </main>

    <script>
        let auth0Client = null;

        // --- 1. Auth0 Configuration ---
        const auth0Config = {
            domain: "AUTH_DOMAIN",
            clientId: "AUTH_ID",
            authorizationParams: {
                redirect_uri: window.location.origin
            }
        };

        window.onload = async () => {
            try {
                // Initialize the Auth0 client
                auth0Client = await auth0.createAuth0Client(auth0Config);

                // Check if user is returning from Auth0 redirect
                const params = new URLSearchParams(window.location.search);
                if (params.has("code") && params.has("state")) {
                    console.log("Handling redirect callback...");
                    await auth0Client.handleRedirectCallback();
                    // Clean up URL
                    window.history.replaceState({}, document.title, "/");
                    
                    // You are now logged in!
                    // Redirect to a dashboard or update UI
                    checkAuth(); 
                }

                // Add login button event listener
                const loginButton = document.getElementById("login-button");
                loginButton.addEventListener("click", () => {
                    auth0Client.loginWithRedirect();
                });
                
            } catch (e) {
                console.error("Auth0 initialization error:", e);
            }
        };
        
        // Example function to check auth state
        async function checkAuth() {
            const isAuthenticated = await auth0Client.isAuthenticated();
            console.log("User is authenticated:", isAuthenticated);
            if (isAuthenticated) {
                const user = await auth0Client.getUser();
                console.log("User profile:", user);
                // Here you would redirect to your app's dashboard
                // e.g., window.location.href = "/dashboard";
                
                const card = document.querySelector('.glass-card');
                card.innerHTML = `
                    <h1 class="text-3xl font-black text-white text-glow-yellow drop-shadow-yellow-lg">Logged In!</h1>
                    <p class="mt-4 text-lg text-neutral-300">Welcome, ${user.name || user.email}</p>
                    <p class="mt-2 text-sm text-neutral-400">Redirecting you to the app...</p>
                `;
                // Add a logout button or redirect
                // const logoutButton = document.createElement('button');
                // ... add logout logic
            }
        }

        // --- 3. Animated Particle Background ---
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const particleConfig = {
            color: 'rgba(250, 204, 21,', // Base color
            maxCount: 60,
            minRadius: 0.3,
            maxRadius: 1.2,
            minOpacity: 0.03,
            maxOpacity: 0.15,
            minVel: -0.1,
            maxVel: 0.1,
            connectionDist: 72,
            connectionBaseOpacity: 0.048,
            lineWidth: 0.3
        };

        function createParticles() {
            particles = [];
            const count = Math.min(particleConfig.maxCount, Math.floor((canvas.width * canvas.height) / 20000));
            
            for (let i = 0; i < count; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * (particleConfig.maxRadius - particleConfig.minRadius) + particleConfig.minRadius,
                    opacity: Math.random() * (particleConfig.maxOpacity - particleConfig.minOpacity) + particleConfig.minOpacity,
                    vx: Math.random() * (particleConfig.maxVel - particleConfig.minVel) + particleConfig.minVel,
                    vy: Math.random() * (particleConfig.maxVel - particleConfig.minVel) + particleConfig.minVel,
                    // For wave motion
                    waveAngle: Math.random() * Math.PI * 2,
                    waveSpeed: (Math.random() - 0.5) * 0.02
                });
            }
        }
        createParticles();

        function drawParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles.forEach(p => {
                // Update position
                p.waveAngle += p.waveSpeed;
                p.x += p.vx + Math.cos(p.waveAngle) * 0.1;
                p.y += p.vy + Math.sin(p.waveAngle) * 0.1;

                // Wrap around edges
                if (p.x < 0) p.x = canvas.width;
                if (p.x > canvas.width) p.x = 0;
                if (p.y < 0) p.y = canvas.height;
                if (p.y > canvas.height) p.y = 0;

                // Draw particle
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = `${particleConfig.color}${p.opacity})`;
                ctx.fill();
            });

            // Draw connections
            ctx.lineWidth = particleConfig.lineWidth;
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const dist = Math.sqrt(dx * dx + dy * dy);

                    if (dist < particleConfig.connectionDist) {
                        const opacity = (1 - (dist / particleConfig.connectionDist)) * particleConfig.connectionBaseOpacity;
                        ctx.strokeStyle = `${particleConfig.color}${opacity})`;
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
        }

        function animate() {
            drawParticles();
            requestAnimationFrame(animate);
        }
        animate();

    </script>
</body>
</html>